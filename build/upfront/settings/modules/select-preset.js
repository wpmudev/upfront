define(["scripts/upfront/settings/modules/base-module","scripts/upfront/settings/fields/select-preset"],function(e,t){var s=Upfront.Settings.l10n.preset_manager,i=e.extend({className:"select-presets",initialize:function(e){this.options=e||{},this.group=!1;var i=this;this.selectPresetField=new t({model:this.model,label:s.select_preset_label,property:"preset",values:this.get_presets(),change:function(e){i.model.set_property("preset",this.get_value())}}),this.fields=_([this.selectPresetField]),Upfront.Application.user_can("MODIFY_PRESET")&&this.listenTo(this.selectPresetField,"upfront:presets:new",this.createPreset),Upfront.Application.user_can("SWITCH_PRESET")&&this.listenTo(this.selectPresetField,"changed",this.changePreset)},changePreset:function(){return Upfront.Application.user_can("SWITCH_PRESET")?void this.trigger("upfront:presets:change",this.selectPresetField.get_value()):!1},createPreset:function(e){return Upfront.Application.user_can("MODIFY_PRESET")?void this.trigger("upfront:presets:new",e):!1},get_title:function(){return s.select_preset},get_presets:function(){var e=[];return _.each(this.options.presets.models,function(t){"undefined"==typeof t.get("legacy")&&("undefined"==typeof t.get("name")?e.push({label:t.get("id"),value:t.get("id")}):e.push({label:t.get("name"),value:t.get("id")}))}),e}});return i});