define(["scripts/upfront/settings/modules/base-module"],function(e){var i=Upfront.Settings.l10n.preset_manager,s=e.extend({className:"settings_module corner_radius_settings_item upfront-radius-container clearfix",group:!1,get_title:function(){return this.options.title},initialize:function(e){this.options=e||{},this.options.max_value&&this.options.max_value<200&&(this.options.max_value=200),this.options.max_value||(this.options.max_value=200);var s=this,t=this.options.state;this.options.toggle=!0;var o=function(e){var i={},t=s.model.get(s.options.fields.lock);"yes"==t&&(i[s.options.fields.radius1]=e,i[s.options.fields.radius2]=e,i[s.options.fields.radius3]=e,i[s.options.fields.radius4]=e,s.model.set(i,{silent:!1}),s.$el.find("input[name="+s.options.fields.radius1+"]").val(e),s.$el.find("input[name="+s.options.fields.radius2+"]").val(e),s.$el.find("input[name="+s.options.fields.radius3+"]").val(e),s.$el.find("input[name="+s.options.fields.radius4+"]").val(e))},l=_.throttle(o,5);this.fields=_([new Upfront.Views.Editor.Field.Toggle({model:this.model,className:"useRadius upfront-toggle-field checkbox-title",name:s.options.fields.use,label:"",default_value:1,multiple:!1,values:[{label:i.rounded_corners,value:"yes"}],change:function(e){s.model.set(s.options.fields.use,e),s.reset_fields(e)},show:function(e,i){var o=i.closest(".upfront-settings-item-content");s.model.get(s.options.fields.lock);"yes"==e?o.find("."+t+"-toggle-wrapper").show():o.find("."+t+"-toggle-wrapper").hide()}}),new Upfront.Views.Editor.Field.Checkboxes({model:this.model,className:t+"-radius-lock border_radius_lock radius-lock",name:s.options.fields.lock,label:"",default_value:0,multiple:!1,values:[{label:"",value:"yes"}],show:function(e){s.model.set(s.options.fields.lock,e);var i=s.model.get(s.options.fields.radius1);l(i)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:t+"-radius1 border_radius border_radius1 upfront-radius-container-top-left field-grid-half",name:s.options.fields.radius1,label:"",min:0,max:1e3,default_value:0,values:[{label:"",value:"0"}],change:function(e){s.model.set(s.options.fields.radius1,e),l(e)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:t+"-radius2 border_radius border_radius2 upfront-radius-container-top-right field-grid-half field-grid-half-last",name:s.options.fields.radius2,label:"",min:0,max:1e3,default_value:0,values:[{label:"",value:"0"}],change:function(e){s.model.set(s.options.fields.radius2,e),l(e)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:t+"-radius3 border_radius border_radius3 upfront-radius-container-bottom-right field-grid-half",name:s.options.fields.radius3,label:"",min:0,max:1e3,default_value:0,values:[{label:"",value:"0"}],change:function(e){s.model.set(s.options.fields.radius3,e),l(e)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:t+"-radius4 border_radius border_radius4 upfront-radius-container-bottom-left field-grid-half field-grid-half-last",name:s.options.fields.radius4,label:"",min:0,max:1e3,default_value:0,values:[{label:"",value:"0"}],change:function(e){s.model.set(s.options.fields.radius4,e),l(e)}})])},reset_fields:function(e){if("undefined"!=typeof e&&"yes"===e){var i=this.get_static_field_values(e,this.options.prepend);this.save_static_values(e,i),this.$el.empty(),this.render()}},save_static_values:function(e,i){this.model.set(this.options.fields.lock,i.lock),this.model.set(this.options.fields.radius1,i.radius1),this.model.set(this.options.fields.radius2,i.radius2),this.model.set(this.options.fields.radius3,i.radius3),this.model.set(this.options.fields.radius4,i.radius4)},get_static_field_values:function(e,i){var s={},t="";return"undefined"!=typeof this.options.prefix&&(t=this.options.prefix+"-"),s.lock=this.model.get(this.clear_prepend(t+this.options.fields.lock,i))||"",s.radius1=this.model.get(this.clear_prepend(t+this.options.fields.radius1,i))||"",s.radius2=this.model.get(this.clear_prepend(t+this.options.fields.radius2,i))||"",s.radius3=this.model.get(this.clear_prepend(t+this.options.fields.radius3,i))||"",s.radius4=this.model.get(this.clear_prepend(t+this.options.fields.radius4,i))||"",s},clear_prepend:function(e,i){return e.replace(i,"")}});return s});