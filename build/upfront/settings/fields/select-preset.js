define([],function(){var e=Upfront.Settings.l10n.preset_manager,t=Upfront.Views.Editor.Field.Chosen_Select.extend({className:"preset select-preset-field",render:function(){Upfront.Views.Editor.Field.Chosen_Select.prototype.render.call(this);var t=this,n="",r=this.$el.find(".upfront-chosen-select").val();r=="default"&&Upfront.Application.get_current()===Upfront.Application.MODE.THEME?n="230px":n="175px",this.$el.find(".upfront-chosen-select").chosen({search_contains:!0,width:n,disable_search:!Upfront.Application.user_can("CREATE_PRESET")});if(Upfront.Application.user_can("CREATE_PRESET")){var i=['<a href="#" title="'+e.add_preset_label+'" class="upfront-preset-add">'+e.add_label+"</a>"];this.$el.find(".chosen-search").append(i.join(""))}return this.$el.on("click",".upfront-preset-add",function(n){n.preventDefault();if(!Upfront.Application.user_can("CREATE_PRESET"))return!1;var r=t.$el.find(".chosen-search input").val();if(r.trim()===""){alert(e.not_empty_label);return}if(r.match(/[^A-Za-z0-9 ]/)){alert(e.special_character_label);return}if(!r.match(/^[A-Za-z][A-Za-z0-9 ]*$/)){alert(e.invalid_preset_label);return}t.trigger("upfront:presets:new",r.trim())}),this},get_value_html:function(e,t){var n="",r=this.get_saved_value()?this.get_saved_value():"default";return e.value===this.clear_preset_name(r)&&(n=' selected="selected"'),['<option value="',e.value,'"',n,">",e.label,"</option>"].join("")},clear_preset_name:function(e){return e=e.replace(" ","-"),e=e.replace(/[^-a-zA-Z0-9]/,""),e}});return t});