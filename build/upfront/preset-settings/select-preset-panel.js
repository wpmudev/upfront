define(["scripts/upfront/preset-settings/select-preset-item","scripts/upfront/preset-settings/edit-preset-item","scripts/upfront/element-settings/panel"],function(e,t,n){var r=n.extend({className:"preset-manager-panel",initialize:function(n){this.options=n,this.selectPresetItem=new e({model:this.model,presets:this.options.presets});var r=this.property("preset")?this.clear_preset_name(this.property("preset")):"default";this.editPresetItem=new t({model:this.options.presets.findWhere({id:r}),stateFields:this.options.stateFields}),this.listenTo(this.selectPresetItem,"upfront:presets:new",this.createPreset),this.listenTo(this.selectPresetItem,"upfront:presets:edit",this.editPreset),this.listenTo(this.editPresetItem,"upfront:presets:delete",this.deletePreset),this.listenTo(this.editPresetItem,"upfront:presets:update",this.onPresetUpdate),this.listenTo(this.model.get("properties"),"change",this.onPresetChange),this.settings=_([this.selectPresetItem,this.editPresetItem])},clear_preset_name:function(e){return e=e.replace(" ","-"),e=e.replace(/[^-a-zA-Z0-9]/,""),e},createPreset:function(e){this.trigger("upfront:presets:new",e)},onPresetChange:function(e){this.trigger("upfront:presets:change",e)},onPresetUpdate:function(e){this.trigger("upfront:presets:update",e)},editPreset:function(e){this.trigger("upfront:presets:edit",e)},deletePreset:function(e){this.trigger("upfront:presets:delete",e)},property:function(e,t,n){return typeof t!="undefined"?(typeof n=="undefined"&&(n=!0),this.model.set_property(e,t,n)):this.model.get_property_value_by_name(e)}});return r});