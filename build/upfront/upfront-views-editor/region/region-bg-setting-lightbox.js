!function(e){var o=Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["scripts/upfront/upfront-views-editor/region/region-bg-setting","scripts/upfront/upfront-views-editor/fields","text!upfront/templates/region_edit_panel.html"],function(t,l,r){return t.extend({get_template:function(){var o=e(r);return _.template(o.find("#upfront-region-bg-setting-lightbox").html())},render_main_settings:function(e){this.render_lightbox_settings(e.find(".upfront-region-bg-setting-lightbox-region"))},render_lightbox_settings:function(e){var t=this,l=Upfront.Settings.LayoutEditor.Grid,r=function(e){t=e.$spectrum?e:this;var o=t.get_value(),l=t.get_saved_value();o!=l&&t.property.set({value:o})},i={width:new Upfront.Views.Editor.Field.Number({model:this.model,property:"col",className:"upfront-field-wrap upfront-field-wrap-number width_cols",label:o.col_width+":",label_style:"inline",min:3,max:24,change:r}),height:new Upfront.Views.Editor.Field.Number({model:this.model,property:"height",label:o.px_height+":",label_style:"inline",min:3*l.baseline,max:99999,change:r}),click_out_close:new Upfront.Views.Editor.Field.Checkboxes({model:this.model,property:"click_out_close",label:"",values:[{label:o.click_close_ltbox,value:"yes",checked:"yes"==this.model.get_property_value_by_name("click_out_close")?"checked":!1}],change:r}),show_close:new Upfront.Views.Editor.Field.Checkboxes({model:this.model,property:"show_close",label:"",values:[{label:o.show_close_icon,value:"yes",checked:"yes"==this.model.get_property_value_by_name("show_close")?"checked":!1}],change:r})};i.overlay_color=new Upfront.Views.Editor.Field.Color({model:this.model,property:"overlay_color",className:"upfront-field-wrap upfront-field-wrap-color sp-cf overlay_color",default_value:"rgba(38,58,77,0.75)",label:o.overlay_bg+":",change:r,spectrum:{move:function(e){var o=e.toRgb(),t="rgba("+o.r+","+o.g+","+o.b+","+e.alpha+")";i.overlay_color.get_field().val(t),r(i.overlay_color)},change:function(e){var o=e.toRgb(),t="rgba("+o.r+","+o.g+","+o.b+","+e.alpha+")";i.overlay_color.get_field().val(t),r(i.overlay_color)}}}),i.lightbox_color=new Upfront.Views.Editor.Field.Color({model:this.model,property:"lightbox_color",default_value:"rgba(248,254,255,0.9)",label:o.active_area_bg+":",change:r,spectrum:{move:function(e){var o=e.toRgb(),t="rgba("+o.r+","+o.g+","+o.b+","+e.alpha+")";i.lightbox_color.get_field().val(t),r(i.lightbox_color)},change:function(e){var o=e.toRgb(),t="rgba("+o.r+","+o.g+","+o.b+","+e.alpha+")";i.lightbox_color.get_field().val(t),r(i.lightbox_color)}}}),_.each(i,function(o){o.render(),o.delegateEvents(),e.append(o.$el)}),this.model.set_property("delete",!1);var t=this;e.on("click","a.upfront-entity-delete_trigger",function(){t.model.set_property("delete",!0),t.close()}),e.closest(".upfront-inline-modal-wrap").draggable()},update_lightbox_overlay:function(e){var o=e.toRgb();"rgba("+o.r+","+o.g+","+o.b+","+e.alpha+")"}})})}(jQuery);