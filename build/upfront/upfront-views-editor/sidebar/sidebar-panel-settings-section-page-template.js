!function(t){var e=Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["scripts/upfront/upfront-views-editor/sidebar/sidebar-panel-settings-section","upfront/post-editor/upfront-post-edit"],function(t,n){return t.extend({initialize:function(t){this.options=t,this.settings=_([]),this.templates=_([]),this.layouts=_([]),this.options.call=!1,this.layoutList=new Upfront.Collections.PageTemplateList([],{postId:this.options.postId}),this.load_dev=_upfront_storage_key!=_upfront_save_storage_key?1:0},get_name:function(){return"templates"},get_title:function(){return e.label_page_template},on_render:function(){var t=this;this.options.call||(this.layoutList.fetch({load_dev:t.load_dev,template_type:"layout"}).done(function(e){t.layouts=new Upfront.Collections.PageTemplateList(e.data.results),t.layoutList.fetch({load_dev:t.load_dev,template_type:"page"}).done(function(e){t.templates=new Upfront.Collections.PageTemplateList(e.data.results),t.append_template_box()})}),this.options.call=!0)},append_template_box:function(){var t=this,o=new n.PageTemplateEditor({collection:t.layoutList,label:e.label_page_template});setTimeout(function(){o.allPageTemplates=t.templates,o.allPageLayouts=t.layouts,o.render(),o.delegateEvents(),t.$el.empty(),t.$el.append(o.$el),o.after_append()},300)}})})}(jQuery);