!function(n){Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["scripts/upfront/upfront-views-editor/commands/command","scripts/upfront/upfront-views-editor/commands/commands","scripts/upfront/upfront-views-editor/commands/menu/command-close","scripts/upfront/upfront-views-editor/commands/menu/command-wpadmin","scripts/upfront/upfront-views-editor/commands/menu/command-help"],function(e,o,t,i,m){var s=o.extend({className:"command-more-menu-list",initialize:function(){this.commands=_([new t({model:this.model}),new i({model:this.model}),new m({model:this.model})])}});return e.extend({className:"command-more-menu",initialize:function(){this.menu=new s({model:this.model}),this.opened=!1},render:function(){this.menu.render(),this.$el.html('<i class="upfront-icon upfront-icon-more-menu"></i>'),this.$el.append(this.menu.el),n(document).off("click.more_menu"),n(document).on("click.more_menu",this,this.on_document_click)},on_click:function(){this.toggle_menu(),this.menu.commands.each(function(n){n.delegateEvents()})},on_document_click:function(e){var o=n(e.target),t=e.data;o.closest(t.$el).length>0||o.is(t.$el)||t.close_menu()},toggle_menu:function(){this.opened?this.close_menu():this.open_menu()},open_menu:function(){this.$el.addClass("menu-open"),this.$el.find(".upfront-icon-more-menu").addClass("upfront-icon-more-menu-active"),this.opened=!0,Upfront.Events.trigger("upfront:more_menu:open")},close_menu:function(){this.$el.removeClass("menu-open"),this.$el.find(".upfront-icon-more-menu").removeClass("upfront-icon-more-menu-active"),this.opened=!1,Upfront.Events.trigger("upfront:more_menu:close")}})})}(jQuery);